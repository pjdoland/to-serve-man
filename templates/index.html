{% extends "base.html" %}
{% from "macros.html" import recipe_card %}

{% block content %}
<div class="max-w-cookbook mx-auto px-8">
    <!-- Hero Section -->
    <section class="text-center py-16 mb-16">
        {{ hero_content|safe }}
    </section>

    <!-- Recent Recipes -->
    <section class="mb-24">
        <h3 class="font-serif text-2xl mb-8 text-center">Recent Recipes</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16">
            {% for recipe in recipes[:12] %}
            {{ recipe_card(recipe, base_url) }}
            {% endfor %}
        </div>
    </section>

    <!-- Browse Links -->
    <section class="mb-24">
        <h3 class="font-serif text-2xl mb-8 text-center">Browse</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-16">
            <div>
                <h4 class="font-serif text-xl mb-4">By Category</h4>
                <ul class="list-none pl-0">
                    {% for category, recipes in categories.items() %}
                    <li class="mb-2">
                        <a href="{{ base_url }}/{{ category }}/" class="no-underline border-none hover:text-cookbook-accent transition-colors duration-200">{{ category|title }}</a>
                        <span class="text-cookbook-light text-sm">({{ recipes|length }})</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div>
                <h4 class="font-serif text-xl mb-4">By Cuisine</h4>
                <ul class="list-none pl-0">
                    {% for cuisine, recipes in cuisines.items() %}
                    <li class="mb-2">
                        <a href="{{ base_url }}/cuisine/{{ cuisine|lower|replace(' ', '-') }}/" class="no-underline border-none hover:text-cookbook-accent transition-colors duration-200">{{ cuisine }}</a>
                        <span class="text-cookbook-light text-sm">({{ recipes|length }})</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div>
                <h4 class="font-serif text-xl mb-4">By Spirit</h4>
                <ul class="list-none pl-0">
                    {% for spirit, recipes in spirits.items() %}
                    <li class="mb-2">
                        <a href="{{ base_url }}/spirit/{{ spirit|lower|replace(' ', '-') }}/" class="no-underline border-none hover:text-cookbook-accent transition-colors duration-200">{{ spirit|title }}</a>
                        <span class="text-cookbook-light text-sm">({{ recipes|length }})</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div>
                <h4 class="font-serif text-xl mb-4">Popular Tags</h4>
                <ul class="list-none pl-0">
                    {% for tag, recipes in tags.items() %}
                    {% if loop.index <= 10 %}
                    <li class="mb-2">
                        <a href="{{ base_url }}/tags/{{ tag|lower|replace(' ', '-') }}/" class="no-underline border-none hover:text-cookbook-accent transition-colors duration-200">{{ tag }}</a>
                        <span class="text-cookbook-light text-sm">({{ recipes|length }})</span>
                    </li>
                    {% endif %}
                    {% endfor %}
                </ul>
            </div>
        </div>
    </section>
</div>
{% endblock %}
