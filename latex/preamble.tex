% To Serve Man â€” LaTeX Preamble
% Beautiful cookbook typography

\documentclass[10pt,twoside,openright]{book}

% Page geometry - wider margins for optimal 45-75 character line length
\usepackage[
    letterpaper,
    inner=1.5in,
    outer=1.25in,
    top=1in,
    bottom=1.25in,
    marginparwidth=0in,
    marginparsep=0in
]{geometry}

% Font configuration
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

% Enhanced microtype configuration for superior typography
\usepackage[
    activate={true,nocompatibility},
    final,
    tracking=true,
    kerning=true,
    spacing=true,
    factor=1100,
    stretch=10,
    shrink=10
]{microtype}

% Use EB Garamond for body text (elegant serif)
\usepackage{ebgaramond}

% Use Helvetica for sans-serif
\usepackage{helvet}

% Better line spacing (1.4 for good readability at 10pt base)
\usepackage{setspace}
\setstretch{1.4}

% Prevent awkward page breaks in recipes
\usepackage{needspace}

% Section formatting
\usepackage{titlesec}

% Part formatting - elegant, centered (section divider pages)
\titleformat{\part}[display]
    {\centering\Huge\scshape\addfontfeatures{LetterSpace=15}}
    {\thepart}
    {0pt}
    {}
\titlespacing*{\part}
    {0pt}
    {0.3\textheight}             % Push down from top for breathing room
    {2\baselineskip}

% Chapter formatting - left-aligned (category headers like "Breakfast")
\titleformat{\chapter}[display]
    {\Large\scshape\addfontfeatures{LetterSpace=10}}
    {}
    {0pt}
    {}
\titlespacing*{\chapter}
    {0pt}
    {3\baselineskip}             % Generous space before
    {1.5\baselineskip}           % Space after

% Recipe title formatting - large, bold, prominent visual anchor
\titleformat{\section}
    {\LARGE\bfseries}            % Large and bold for prominence
    {}
    {0pt}
    {}
\titlespacing*{\section}
    {0pt}
    {2\baselineskip}             % Space before
    {0.5\baselineskip}           % Space after

% Section labels: "Ingredients" and "Instructions"
\newcommand{\ingredientsheading}{\fontsize{13}{16}\selectfont\fontseries{sb}\selectfont}
\newcommand{\instructionsheading}{\fontsize{13}{16}\selectfont\fontseries{sb}\selectfont}

% Subsection - recipe section headers like "Make the sauce"
\titleformat{\subsection}
    {\normalfont\fontsize{11}{13}\selectfont\fontseries{sb}\selectfont}
    {}
    {0pt}
    {}
    [\vspace{0.25em}]

% Lists
\usepackage{enumitem}
\usepackage{xcolor}

% Define accent color (matches website's cookbook-accent: #c1121f)
\definecolor{accentcolor}{HTML}{c1121f}

% Ingredients list - clean with light centered dot bullets
\newlist{ingredients}{itemize}{1}
\setlist[ingredients]{
    label={\textperiodcentered},
    leftmargin=1.5em,
    labelsep=0.5em,
    itemsep=0.15\baselineskip,
    parsep=0pt,
    topsep=0.5\baselineskip
}

% Instructions list - clean numbered list with breathing room
\setlist[enumerate]{
    label={\arabic*.},           % Simple numbers with period
    leftmargin=2em,
    labelsep=0.75em,
    itemsep=0.5\baselineskip,    % More space between steps
    parsep=0pt,
    topsep=0.5\baselineskip
}

% Headers and footers - elegant running headers
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}                                      % Clear all
\fancyhead[LE]{\small\itshape\nouppercase{\leftmark}}         % Chapter on left pages
\fancyhead[RO]{\small\itshape\nouppercase{\rightmark}}        % Section on right pages
\fancyfoot[C]{\small\thepage}                   % Page number centered
\renewcommand{\headrulewidth}{0pt}              % No header rule (cleaner)

% Add spacing between headers/footers and content
\setlength{\headheight}{14pt}
\setlength{\headsep}{2em}
\setlength{\footskip}{3em}

% Chapter page style (no header, centered footer)
\fancypagestyle{plain}{
    \fancyhf{}
    \fancyfoot[C]{\small\thepage}
    \renewcommand{\headrulewidth}{0pt}
}

% Hyperlinks (for digital PDF)
\usepackage[
    colorlinks=true,
    linkcolor=black,
    urlcolor=black,
    citecolor=black,
    bookmarks=true,
    bookmarksnumbered=false,
    pdfborder={0 0 0}
]{hyperref}

% Better tables
\usepackage{booktabs}

% Graphics (if needed for images)
\usepackage{graphicx}

% Better quotes
\usepackage{csquotes}

% Widow and orphan control
\widowpenalty=10000
\clubpenalty=10000

% Table of contents formatting - clean with dot leaders
\usepackage{tocloft}
\renewcommand{\cftdotsep}{2}                    % Dot spacing
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
\setlength{\cftbeforesecskip}{0.5\baselineskip}
\renewcommand{\cftchapfont}{\normalfont}        % Not bold
\renewcommand{\cftchappagefont}{\normalfont}
\renewcommand{\cftsecfont}{\normalfont}
\renewcommand{\cftsecpagefont}{\normalfont}
\setlength{\cftbeforechapskip}{0.5em}

% Define light text color (matches website's cookbook-light: #6b6560)
\definecolor{lighttext}{HTML}{6b6560}

% Recipe metadata - elegant small caps with letter spacing
\newcommand{\recipemeta}[1]{%
    \vspace{0.5\baselineskip}%
    {\small\addfontfeatures{LetterSpace=5}\textsc{#1}}%
    \vspace{0.75\baselineskip}%
    \par
}

% Recipe description (headnote) - subordinate, smaller, italic
\newcommand{\recipedescription}[1]{%
    {\small\itshape\color{lighttext}#1}%
    \vspace{0.75\baselineskip}%
    \par
}

% Recipe attribution - consistent, quiet position
\newcommand{\recipeattribution}[1]{%
    \vspace{\baselineskip}%
    {\small\itshape\color{lighttext}Recipe by #1}%
    \par
}

% Spacing adjustments
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.5em}

% Start of document content
\begin{document}

% Front matter
\frontmatter

% Half-title page
\begin{titlepage}
\centering
\vspace*{3in}
{\Huge {{COOKBOOK_TITLE}}}
\end{titlepage}

\cleardoublepage

% Title page
\begin{titlepage}
\centering
\vspace*{2in}
{\Huge {{COOKBOOK_TITLE}}}\\[1.5em]
{\Large A Personal Cookbook}\\[3em]
{{COOKBOOK_AUTHOR_LINE}}
{\large Generated \today}
\end{titlepage}

\cleardoublepage

% Epigraph
\thispagestyle{empty}
\centering
\vspace*{3in}
{\large\itshape``It's a cookbook!''}

\cleardoublepage

% Table of contents
\tableofcontents

\cleardoublepage

% Main matter
\mainmatter
